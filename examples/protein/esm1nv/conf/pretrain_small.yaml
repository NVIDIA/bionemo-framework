defaults:
  - base_config
model:
  tokenizer:
    library: 'sentencepiece'
    type: null
    model: /model/protein/esm1nv/vocab/protein_sequence_sentencepiece.model
    vocab_file: /model/vocab/protein_sequence_sentencepiece.vocab
  data:
    dataset_path: /data/uniref2022_05 # parent directory for data, contains train / val / test folders. Needs to be writeable for index creation.
    dataset: # inclusive range of data files to load x[000..049] or can a single file, e.g. x000
      train: x[000..049]
      test: x[000..049]
      val: x[000..049]
    micro_batch_size: ${model.micro_batch_size}
    num_workers: 10
    data_impl_kwargs:
      csv_mmap:
        data_col: 3 # 0-based
    modify_percent: 0.1 # Percentage of characters in a protein sequence to modify. (Modification means replacing with another amino acid or with a mask token)
    perturb_percent: 0.5 # Of the modify_percent, what percentage of characters are to be replaced with another amino acid.
  validation:
      validation_enabled: True
      datasets:
        - name: SSPred
          class: SSPredictionCallback
          enabled: True
          emb_type: "ESM"
          infer_target: bionemo.model.protein.esm1nv.infer.ESM1nvInference
          emb_batch_size: 256
          batch_size: 64
          num_epochs: 10
          shuffle: True
          num_workers: 20
          dataset_path: /data/netsurfp_2.0
          dataset:
            train: x000
            val: x000
            test: new_pisces
          sequence_col : "sequence" # name of column with protein sequence in csv file
          labels_col: ["3state","8state", "resolved"] # names of label columns in csv file
          labels_size: [3, 8, 2] # number of classes in each label
          mask_col: ["resolved", "resolved", null] # names of mask columns in csv file, masks must be 0 or 1
          random_seed: 1234
          optim:
              name: adam
              lr: 0.0001
              betas:
                - 0.9
                - 0.999
              eps: 1e-8
              weight_decay: 0.01
              sched:
                name: WarmupAnnealing
                min_lr: 0.00001
                last_epoch: -1
                warmup_ratio: 0.01
                max_steps: 1000