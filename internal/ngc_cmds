# NGC Release Related Commands

Example commands for uploading release related artifacts such as containers, model weights, and resources to NGC. Update variables such as `ORG`, `TEAM` as appropriate.

## Container

Commands for uploading containers are in launch.sh script.

## Model Upload

```shell
ORG=nvidian
TEAM=clara-lifesciences
MODEL_PATH=/data/bionemo/models/esm1nv.nemo

ngc registry model upload-version \
    --gpu-model A100 \
    --org nvstaging \
    --source $MODEL_PATH \
    ${ORG}/${TEAM}/esm1nv:23.06
```


## Resources

### USPTO_50K Dataset
#### Create resource

```shell
ORG="nvidian"
TEAM="clara-lifesciences"
RESOURCE_NAME=uspto_50k_dataset
TARGET=${ORG}/${TEAM}/${RESOURCE_NAME}
LABEL="bionemo"

ngc registry resource create \
--display-name "USPTO_50K Dataset" \
--short-desc "Chemical reactions from US patents" \
--org ${ORG} \
--team ${TEAM} \
--application OTHER \
--format OTHER \
--framework Other \
--precision OTHER \
--built-by NVIDIA \
--publisher NVIDIA \
--public-dataset-link "https://az.app.box.com/s/7eci3nd9vy0xplqniitpk02rbg9q2zcq/folder/144882141119" \
--public-dataset-license "https://github.com/MolecularAI/Chemformer/blob/main/LICENSE" \
--public-dataset-name "USPTO_50K Dataset" \
--label ${LABEL} \
${TARGET}
```

#### Upload resource version

```shell
ORG="nvidian"
TEAM="clara-lifesciences"
RESOURCE_NAME=uspto_50k_dataset
TARGET=${ORG}/${TEAM}/${RESOURCE_NAME}
VERSION=v23.06

ngc registry resource upload-version ${TARGET}:${VERSION} \
--org ${ORG} \
--team ${TEAM} \
--source ./uspto_50.pickle
```

### Download resource (if needed)

```shell
ORG="nvidian"
TEAM="clara-lifesciences"
RESOURCE_NAME=uspto_50k_dataset
TARGET=${ORG}/${TEAM}/${RESOURCE_NAME}
VERSION=v23.06

ngc registry resource download-version ${TARGET}:${VERSION}
```

### UniRef50 Dataset
#### Create resource

```shell
ORG="nvidian"
TEAM="clara-lifesciences"
RESOURCE_NAME=uniref50_2022_05
TARGET=${ORG}/${TEAM}/${RESOURCE_NAME}

ngc registry resource create \
--display-name "UniRef50 Dataset 2022_05" \
--short-desc "UniRef50 Dataset 2022_05" \
--org ${ORG} \
--team ${TEAM} \
--application OTHER \
--format OTHER \
--framework Other \
--precision OTHER \
--built-by NVIDIA \
--publisher NVIDIA \
--public-dataset-link "https://www.uniprot.org/help/downloads" \
--public-dataset-license "https://www.uniprot.org/help/license" \
--public-dataset-name "UniRef50 Dataset" \
--label bionemo \
${TARGET}
```

#### Upload resource

```shell
ORG="nvidian"
TEAM="clara-lifesciences"
RESOURCE_NAME=uniref50_2022_05
TARGET=${ORG}/${TEAM}/${RESOURCE_NAME}
VERSION=v23.06

ngc registry resource upload-version ${TARGET}:${VERSION} \
--org nvidian \
--team "clara-lifesciences" \
--source ./uniref2022_UR50.fasta
```
