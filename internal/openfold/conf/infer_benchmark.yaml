hydra:
  searchpath:
     - file://${oc.env:BIONEMO_HOME}/examples/protein/openfold/conf


defaults:
  - base_config
  - _self_


# benchmarking_dir_path must point to the directory with the following structure

benchmark_dir_path: ???
allow_missing_msa: False
results_path: ${oc.env:BIONEMO_HOME}/test_results/openfold_benchmark # a directory where all predictions all stored

model:
  stage: finetuning
  precision: tf32
  seed: 44
  micro_batch_size: 1
  tensor_model_parallel_size: 1
  pipeline_model_parallel_size: 1
  resume_from_checkpoint: null

  # override from basic config
  max_msa_clusters: 508
  max_extra_msa: 5120
  use_only_pdb_chain_ids: null

  extra_msa_stack_config:
    chunk_size_msa_att: 1024
    chunk_size_opm: 128

  data:
    dataset_path: ${oc.env:BIONEMO_HOME}/data
    dataset_variant: processed
    msa_a3m_filepaths: null # Optional list of MSAs files in A3M format for each sequence. Path should be null for sequences without MSAs
    template_hhr_filepaths: null # Optional list of structural templates for each sequence. Path should be null for sequences without strucutural homologues.
    num_workers: 0
    filter_by_alignments: True # Whether to filter out mmcif chains with no alignments.
    generate_templates_if_missing: True
    pdb70_path: ??? # path to PDB 70 dataset required for finding template hits

trainer:
  # the effective batch size should be 128
  devices: 1
  accelerator : gpu
  precision: 32
  num_nodes: 1
  logger: False

exp_manager:
  explicit_log_dir: null
  exp_dir: null
  create_checkpoint_callback: False
