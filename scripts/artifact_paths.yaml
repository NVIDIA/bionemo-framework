# This file specifies the source locations of pretrained models, and what
# the target locations to which they should be downloaded.
#
# The model source can be from either NGC (for internal nvidia + external customer use)
# or from SwiftStack (aka PBSS) for internal nvidia use.
#
# The download_models.py script requires the download directory be specified, but there
# are two extra parameters here that can further specify what to do with the downloaded file.
# "symlink" is used to specify if any symlinking operation needs to happen after download.
# "relative_download_dir" is used to specify the subdirectory to which the files should
# be downloaded.
# "extra_args" specifies any extra arguments that should be passed the ngc download or
# s3 download commands.
#
# All models with an `ngc` path are publically available. Those with only a `pbss` path
# are currently in internal NVIDIA development.

models:
    # OLD nemo models from bionemo1
    geneformer_10M_240530:
        # A pretrained 10.3M parameter geneformer (BERT) on 23M unique single cells and 25429 ENSG based tokens,
        #   padded to a final shape of 25472 for GPU efficiency.
        # See https://wandb.ai/clara-discovery/scFM_v9/runs/4ij9ghox
        ngc: null
        pbss: "s3://bionemo-ci/models/geneformer-10M-240530-step-115430-wandb-4ij9ghox.nemo"
        symlink:
            source: "../../geneformer-10M-240530-step-115430-wandb-4ij9ghox.nemo"
            target: "singlecell/geneformer/geneformer-10M-240530.nemo"
        md5sum: 375ebb9431419f4936fa3aa2bce6e7d6 # pragma: allowlist secret

    geneformer:
        # A QA model for geneformer with randomly initialized weights.
        pbss: "s3://bionemo-ci/models/geneformer-qa.nemo"
        symlink:
            source: "../../geneformer-qa.nemo"
            target: "singlecell/geneformer/geneformer-qa.nemo"
        md5sum: 349a5ca34f19969dead3f85978e6c65d # pragma: allowlist secret

    esm2nv_650m:
        ngc: "nvidia/clara/esm2nv650m:1.0"
        pbss: "s3://bionemo-ci/models/esm2nv_650M_converted.nemo"
        symlink:
            source: "../../esm2nv_650M_converted.nemo"
            target: "protein/esm2nv/esm2nv_650M_converted.nemo"
        md5sum: f1d926c4ed38ce16be962c79459c4abf # pragma: allowlist secret

    # TODO (@fahadrgh) uncomment when we add hf -> nemo conversion test
    # esm2nv_3b:
    #     ngc: "nvidia/clara/esm2nv3b:1.0"
    #     pbss: "s3://bionemo-ci/models/esm2nv_3B_converted.nemo"
    #     symlink:
    #         source: "../../esm2nv_3B_converted.nemo"
    #         target: "protein/esm2nv/esm2nv_3B_converted.nemo"
data:
    single_cell:
        pbss: "s3://bionemo-ci/test-data/singlecell/singlecell-testdata-20240506.tar.gz"
        relative_download_dir: "test_data/"
        md5sum: dd6b0d791bf2b3301d9793a1d6663c75 # pragma: allowlist secret

    single_cell_nemo1_geneformer_per_layer_outputs:
        unpack: false
        pbss: "s3://bionemo-ci/test-data/singlecell/nemo1-test-outputs-geneformer-qa.pt"
        relative_download_dir: "test_data/"
        md5sum: 5115c1b50998f62d26383d2cf87f597d # pragma: allowlist secret

    single_cell_nemo1_geneformer_golden_vals:
        unpack: false
        pbss: "s3://bionemo-ci/test-data/singlecell/nemo1_geneformer_qa_test_golden_values.pt"
        relative_download_dir: "test_data/"
        md5sum: 3e9e95b4ff05dfe825d5b850c3de1ee3 # pragma: allowlist secret
